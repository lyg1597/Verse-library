

A1 = [ 0.26571559, -0.79081188;
 -0.13016048, -0.79755674;];
B1 = [0.68862002; 0.14411641];
A2 = [-0.302521  , -0.16120958;
  0.41881528,  0.29340182;];
B2 = [-0.38637471; -0.09158776];

x0 = [0.1190;0.4984];

p0 = [2.4637179, 12.10606198];

p1 = 2:0.01:3;
p2 = 11.5:0.01:12.5;

[P1,P2]=meshgrid(p1,p2);

% C = bsxfun(@cost,P1, P2);

C = zeros(size(P1));

for i=1:length(P1)
    for j=1:length(P2)
        x1 = expm(A1*P1(i))*x0-A1\B1;
        x2 = expm(A2*P2(j))*x1-A2\B2;
        c = x2'*x2;
        C(i,j) = c;
    end
end

surf(P1,P2,C)

% function c=cost(p1,p2)
% A1 = [ 0.26571559, -0.79081188;
%  -0.13016048, -0.79755674;];
% B1 = [0.68862002; 0.14411641];
% A2 = [-0.302521  , -0.16120958;
%   0.41881528,  0.29340182;];
% B2 = [-0.38637471; -0.09158776];
% x1 = expm(A1*p1)*x0-A1\B1;
% x2 = expm(A2*p2)*x1-A2\B2;
% c = x2'*x2;
% end
